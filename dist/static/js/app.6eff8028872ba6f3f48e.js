webpackJsonp([1],{"2sd4":function(t,s){},G0Yi:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("7+uW"),a={props:{score:{type:Number}},created:function(){console.log(this.score)},computed:{itemClass:function(){for(var t=[],s=Math.floor(this.score),e=0;e<s;e++)t.push("on");for(;t.length<5;)t.push("off");return t}}},n={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"star"},this._l(this.itemClass,function(t,e){return s("span",{staticClass:"star-item",class:t})}),0)},staticRenderFns:[]};var r=e("VU/8")(a,n,!1,function(t){e("gKZu")},"data-v-3b5d3ca2",null).exports,o=e("//Fk"),l=e.n(o),c=e("mtWM"),d=e.n(c),u="https://mrsfl.github.io/truelovechain/data.json";function v(){return d.a.get(u).then(function(t){return l.a.resolve(t)})}var h={data:function(){return{seller:{},classMap:["decrease","discount","guarantee","invoice","decrease"],detailShow:!1}},created:function(){this._getHeaderInfo()},methods:{_getHeaderInfo:function(){var t=this;v().then(function(s){200==s.status&&(t.seller=s.data.seller)})},headerDetailShow:function(){this.detailShow=!0},headerDetailHide:function(){this.detailShow=!1}},components:{Star:r}},p={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"mheader",on:{click:t.headerDetailShow}},[e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{width:"64",height:"64",src:t.seller.avatar}})]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[e("span",{staticClass:"brand"}),t._v(" "),e("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])]),t._v(" "),e("div",{staticClass:"description"},[t._v(t._s(t.seller.description)+"/"+t._s(t.seller.deliveryTime)+"分钟送达")]),t._v(" "),t.seller.supports?e("div",{staticClass:"support"},[e("span",{staticClass:"icon",class:t.classMap[t.seller.supports[0].type]}),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[0].description))])]):t._e()]),t._v(" "),t.seller.supports?e("div",{staticClass:"support-count"},[e("span",[t._v(t._s(t.seller.supports.length)+"个")]),t._v(" "),e("i",{staticClass:"icon-keyboard_arrow_right"},[t._v(">")])]):t._e()]),t._v(" "),e("div",{staticClass:"bulletin-wrapper"},[e("span",{staticClass:"bulletin-title"}),t._v(" "),e("span",{staticClass:"bulletin-text"},[t._v(t._s(t.seller.bulletin))]),t._v(" "),e("span")]),t._v(" "),e("div",{staticClass:"background"},[e("img",{attrs:{src:t.seller.avatar}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.detailShow,expression:"detailShow"}],staticClass:"header-detail"},[e("div",{staticClass:"detail-wraper clearfix"},[e("div",{staticClass:"detail-main"},[e("h1",{staticClass:"name"},[t._v(t._s(t.seller.name))]),t._v(" "),e("div",{staticClass:"star-wraper"},[e("star",{attrs:{score:t.seller.score}})],1),t._v(" "),t._m(0),t._v(" "),t.seller.supports?e("ul",{staticClass:"supports"},t._l(t.seller.supports,function(s){return e("li",[e("span",{staticClass:"icon-1",class:t.classMap[s.type]}),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(s.description))])])}),0):t._e(),t._v(" "),t._m(1),t._v(" "),e("div",{staticClass:"bulletin"},[t._v(t._s(t.seller.bulletin))])])]),t._v(" "),e("div",{staticClass:"detail-close"},[e("span",{on:{click:function(s){return s.stopPropagation(),t.headerDetailHide(s)}}},[t._v("X")])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"bg-title"},[s("div",{staticClass:"line"}),this._v(" "),s("div",{staticClass:"text"},[this._v("优惠信息")]),this._v(" "),s("div",{staticClass:"line"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"bg-title"},[s("div",{staticClass:"line"}),this._v(" "),s("div",{staticClass:"text"},[this._v("商家公告")]),this._v(" "),s("div",{staticClass:"line"})])}]};var f={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tab-wraper"},[s("router-link",{staticClass:"tab-item",attrs:{tag:"div",to:"/goods"}},[this._v("商品")]),this._v(" "),s("router-link",{staticClass:"tab-item",attrs:{tag:"div",to:"/ratings"}},[this._v("评论")]),this._v(" "),s("router-link",{staticClass:"tab-item",attrs:{tag:"div",to:"/seller"}},[this._v("商家")])],1)},staticRenderFns:[]};var _={name:"App",components:{MHeader:e("VU/8")(h,p,!1,function(t){e("yld9")},"data-v-0d1d0265",null).exports,Tab:e("VU/8")({},f,!1,function(t){e("RW6W")},"data-v-41eac574",null).exports}},m={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("m-header"),this._v(" "),s("tab"),this._v(" "),s("router-view")],1)},staticRenderFns:[]};var C=e("VU/8")(_,m,!1,function(t){e("2sd4"),e("iuVx")},null,null).exports,g=e("/ocq"),w={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"seller"},[this._v("\n\t商家\n")])},staticRenderFns:[]},b=e("VU/8")(null,w,!1,null,null,null).exports,y=e("GQaK"),x={props:{foods:{type:Object}},methods:{addCart:function(t){this.foods.count?this.foods.count++:this.$set(this.foods,"count",1),this.$emit("addBall",t.target)},deleaseCart:function(t){this.foods.count&&this.foods.count--}}},k={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cart-control"},[e("transition",{attrs:{name:"move"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.foods.count>0,expression:"foods.count>0"}],staticClass:"deleaseCart",on:{click:t.deleaseCart}},[t._v("\n\t\t\t-\n\t\t")])]),t._v(" "),e("div",{staticClass:"count"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.foods.count>0,expression:"foods.count>0"}]},[t._v(t._s(t.foods.count))])]),t._v(" "),e("div",{staticClass:"addCart",on:{click:t.addCart}},[t._v("\n\t\t+\n\t")])],1)},staticRenderFns:[]};var P=e("VU/8")(x,k,!1,function(t){e("G0Yi")},"data-v-f9eebbca",null).exports,F={props:{selectFood:{type:Array,default:function(){return[]}}},methods:{empty:function(){this.selectFood.forEach(function(t){t.count=0})},refresh:function(){this.scroll?this.scroll.refresh():this.scroll=new y.a(this.$refs.listContent,{click:!0})}},components:{cartControl:P}},$={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shopcart-detail"},[e("div",{staticClass:"shop-title"},[e("div",{staticClass:"title"},[t._v("购物车")]),t._v(" "),e("div",{staticClass:"empty",on:{click:t.empty}},[t._v("清空")])]),t._v(" "),e("div",{ref:"listContent",staticClass:"list-content"},[e("ul",t._l(t.selectFood,function(s){return e("li",{staticClass:"list-item"},[e("div",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),e("div",{staticClass:"price"},[t._v("￥"+t._s(s.price*s.count))]),t._v(" "),e("div",{staticClass:"cartcontrol-content"},[e("cart-control",{attrs:{foods:s}})],1)])}),0)])])},staticRenderFns:[]};var E=e("VU/8")(F,$,!1,function(t){e("fKg7")},"data-v-d0b93876",null).exports,S=10;var H={props:{selectFood:{type:Array,default:function(){return[]}},deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0}},data:function(){return{balls:function(){for(var t=[],s=0;s<S;s++)t.push({show:!1});return t}(),dropBalls:[],fold:!1}},methods:{drop:function(t){for(var s=0;s<this.balls.length;s++){var e=this.balls[s];if(!e.show)return e.show=!0,e.el=t,void this.dropBalls.push(e)}},beforeDrop:function(t){var s=this.dropBalls[this.dropBalls.length-1].el.getBoundingClientRect(),e=s.left-40,i=-(window.innerHeight-s.top-18);t.style.display="",t.style.transform=t.style.webkitTransform="translate3d(0,"+i+"px,0)";var a=t.getElementsByClassName("innerhook")[0];a.style.transform=a.style.webkitTransform="translate3d("+e+"px,0,0)",console.log(e)},droping:function(t,s){this._reflow=document.body.offsetHeight,t.style.transform=t.style.webkitTransform="translate3d(0,0,0)";var e=t.getElementsByClassName("innerhook")[0];e.style.transform=e.style.webkitTransform="translate3d(0,0,0)",t.addEventListener("transitionend",s)},afterDrop:function(t){console.log(this.dropBalls);var s=this.dropBalls.shift();s&&(s.show=!1,t.style.display="none")},toggleList:function(){this.totalPrice&&(this.fold=!this.fold,this.$emit("addbg",this.listShow))},pay:function(){this.totalPrice<this.minPrice||alert("餐费"+this.totalPrice)}},computed:{totalPrice:function(){var t=0;return this.selectFood.forEach(function(s){t+=s.count*s.price}),t},count:function(){var t=0;return this.selectFood.forEach(function(s){t+=s.count}),t},payDesc:function(){return 0===this.totalPrice?"￥"+this.minPrice+"元起送":this.totalPrice<this.minPrice?"还差"+(this.minPrice-this.totalPrice)+"元起送":"去结算"},payClass:function(){return this.totalPrice<this.minPrice?"not-enough":"enough"},listShow:function(){var t=this;if(!this.totalPrice)return this.fold=!0,!1;var s=!this.fold;return s&&this.$nextTick(function(){t.$refs.shopcartdetail.refresh()}),s}},components:{shopCartDetail:E}},N={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shopcart-wraper"},[e("div",{staticClass:"content",on:{click:t.toggleList}},[e("div",{staticClass:"content-left"},[e("div",{staticClass:"logo-wraper"},[e("p",{staticClass:"logo",class:t.count>0?"highlightlogo":""}),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:t.count,expression:"count"}],staticClass:"count"},[t._v(t._s(t.count))])]),t._v(" "),e("div",{staticClass:"price",class:{whiteColor:t.totalPrice>0}},[t._v("￥"+t._s(t.totalPrice))]),t._v(" "),e("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.deliveryPrice)+"元")])]),t._v(" "),e("div",{staticClass:"content-right",class:t.payClass,on:{click:function(s){return s.stopPropagation(),t.pay(s)}}},[t._v("\n          \t\t"+t._s(t.payDesc)+"\n \t\t\t")])]),t._v(" "),e("div",{staticClass:"ball-wraper"},t._l(t.balls,function(s,i){return e("div",[e("transition",{on:{"before-enter":t.beforeDrop,enter:t.droping,"after-enter":t.afterDrop}},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"ball.show"}],staticClass:"ball"},[e("div",{staticClass:"inner innerhook"})])])],1)}),0),t._v(" "),e("transition",{attrs:{name:"slide-up"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shop-cart-detail-wraper"},[e("shop-cart-detail",{ref:"shopcartdetail",attrs:{selectFood:t.selectFood}})],1)]),t._v(" "),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"bg",on:{click:function(s){return s.stopPropagation(),t.toggleList(s)}}})])],1)},staticRenderFns:[]};var R={data:function(){return{classMap:["decrease","discount","guarantee","invoice","decrease"],goods:[],seller:"",listHeight:[],scrollY:0}},created:function(){this.getGoodsList()},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var s=this.listHeight[t],e=this.listHeight[t+1];if(!e||this.scrollY>=s&&this.scrollY<e)return t}return 0},selectFoods:function(){var t=[];return this.goods.forEach(function(s){s.foods.forEach(function(s){s.count&&t.push(s)})}),t}},methods:{getGoodsList:function(){var t=this;v().then(function(s){console.log(s.data.goods),t.goods=s.data.goods,t.seller=s.data.seller,t.$nextTick(function(){t._initScroll(),t._calculHeight()})})},_initScroll:function(){var t=this;this.meanScroll=new y.a(this.$refs.menuWraper,{click:!0}),this.foodScroll=new y.a(this.$refs.foodsWraper,{click:!0,probeType:3}),this.foodScroll.on("scroll",function(s){var e=Math.abs(Math.round(s.y));t.scrollY=e})},_calculHeight:function(){var t=this.$refs.foodsItem,s=0;this.listHeight.push(s);for(var e=0;e<t.length;e++){s+=t[e].clientHeight,this.listHeight.push(s)}console.log(this.listHeight)},selectMenu:function(t,s){if(s._constructed){var e=this.$refs.foodsItem[t];this.foodScroll.scrollToElement(e,300),console.log(t)}},addFood:function(t){this.$refs.shopcart.drop(t)}},components:{shopcart:e("VU/8")(H,N,!1,function(t){e("oPbD")},"data-v-09ddeef7",null).exports,cartControl:P}},D={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods"},[e("div",{ref:"menuWraper",staticClass:"menu-wraper"},[e("ul",t._l(t.goods,function(s,i){return e("li",{key:s.name,staticClass:"mean-item",class:t.currentIndex===i?"current":"",on:{click:function(s){t.selectMenu(i,s)}}},[e("div",{staticClass:"mean-item-child"},[e("span",{directives:[{name:"show",rawName:"v-show",value:s.type>0,expression:"item.type>0"}],staticClass:"icon",class:t.classMap[s.type]}),e("span",{staticClass:"text"},[t._v(t._s(s.name)+t._s(t.currentIndex))])])])}),0)]),t._v(" "),e("div",{ref:"foodsWraper",staticClass:"foods-wraper"},[e("ul",t._l(t.goods,function(s){return t.goods.length>0?e("li",{ref:"foodsItem",refInFor:!0},[e("h2",{staticClass:"foods-title"},[t._v(t._s(s.name))]),t._v(" "),e("ul",t._l(s.foods,function(s){return e("li",{staticClass:"foods-item"},[e("div",{staticClass:"icon-img"},[e("img",{attrs:{width:"57",height:"57",src:s.image}})]),t._v(" "),e("div",{staticClass:"foods-text"},[e("h2",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),s.description?e("p",{staticClass:"foods-desc"},[t._v(t._s(s.description))]):t._e(),t._v(" "),e("div",{staticClass:"extra"},[e("span",{staticClass:"count"},[t._v("月售"+t._s(s.sellCount)+"份")]),t._v(" "),e("span",[t._v("好评率"+t._s(s.rating)+"%")])]),t._v(" "),e("div",{staticClass:"price"},[e("span",{staticClass:"new"},[t._v("￥"+t._s(s.price))]),t._v(" "),s.oldPrice?e("span",{staticClass:"old"},[t._v("￥"+t._s(s.oldPrice))]):t._e()]),t._v(" "),e("div",{staticClass:"cartcontrol-wrapper"},[e("cart-control",{attrs:{foods:s},on:{addBall:t.addFood}})],1)])])}),0)]):t._e()}),0)]),t._v(" "),e("shopcart",{ref:"shopcart",attrs:{"select-food":t.selectFoods,"delivery-price":t.seller.deliveryPrice,"min-price":t.seller.minPrice}})],1)},staticRenderFns:[]};var M=e("VU/8")(R,D,!1,function(t){e("l75Q")},"data-v-7a54a684",null).exports,V={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"rating-wraper"})},staticRenderFns:[]},B=e("VU/8")(null,V,!1,null,null,null).exports,T={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"error"},[this._v("\n\tmiss\n")])},staticRenderFns:[]},U=e("VU/8")({},T,!1,null,null,null).exports;i.a.use(g.a);var W=new g.a({routes:[{path:"/",redirect:"/goods"},{path:"/goods",component:M,meta:{title:"我是goods"}},{path:"/seller",component:b,meta:{title:"我是seller"}},{path:"/ratings",component:B,meta:{title:"我是rating"}},{path:"*",component:U}]});W.beforeEach(function(t,s,e){t.meta.title&&(document.title=t.meta.title),e()});var I=W;i.a.config.productionTip=!1,new i.a({el:"#app",router:I,components:{App:C},template:"<App/>"})},RW6W:function(t,s){},fKg7:function(t,s){},gKZu:function(t,s){},iuVx:function(t,s){},l75Q:function(t,s){},oPbD:function(t,s){},yld9:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.6eff8028872ba6f3f48e.js.map